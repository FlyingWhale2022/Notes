---
tags: C语言
aliases: 
创建时间: 2023-07-28 16:47
---

函数递归的直观形式：在函数定义中调用自身

函数递归的思想：将问题 1 按照某方式缩小成子问题 2，将问题 2 按照相同的方式缩小成子问题 3，……直到符合递归终止条件，生成子问题 n 。然后从第 n 个问题按照某处理方式得到结果 n ，接着回到上一层按照相同的处理方式处理第 n-1 个问题得到结果 n-1 ，……，最后回到开始处按照相同的处理方式处理第 1 个问题得到结果 1 。

函数递归的过程如下：

![image.png](https://zbn-picture-1319009493.cos.ap-guangzhou.myqcloud.com/public-pic/202307281723933.png)



函数递归的写法如下：

```c
函数{

	问题处理……（可以写在函数体的任何地方）

	递归终止判断{
		将问题缩小，然后调用函数本身实现递归
	}

	问题处理……（可以写在函数体的任何地方）
}
```

**注意：** 函数递归需要两个必要条件
1. 递归终止判断。
2. 问题缩小，使得每次递归调用之后越来越接近终止条件。

**示例 1：**
编写一个递归函数，使其接受一个整型值(无符号)，按照顺序打印它的每一位。

```c
void print(unsigned int num) {
	if (num > 9) {         //递归终止判断
		int n = num / 10; //将问题缩小
		print(n); //递归调用
	}

	printf("%u\t", num % 10); //问题处理
}

//以下写法有错误
void print(unsigned int num) {
	if (num > 9) {         
		num = num / 10; //改变了这一层的num值
		print(n); 
	}

	printf("%u\t", num % 10); 
}
```


**示例 2：**
编写递归函数，使其不允许创建临时变量，即可求字符串的长度。

```c
int mystrlen(char* str) {
	if (*str != '\0') {
		return 1 + mystrlen(str + 1); //利用了递归函数的回溯性
	}
	else {
		return 0;
	}
}
```

**示例 3：**

汉诺塔问题：有三根杆子A、B、C，其中A杆上有n个盘子，盘子大小不一，大的在下，小的在上。要求将A杆上的所有盘子移动到C杆上，并且每次只能移动一个盘子，且在移动过程中，大盘子不能放在小盘子上面


```c
/*
函数的作用：将n个圆环按照汉诺塔规则从起始柱移动到目标柱

函数参数：参数1 -> 圆盘数量  参数2 -> 起始柱  参数3 -> 辅助柱  参数4 -> 目标柱

函数的实现过程：
	1.将上面的n-1个圆环按照汉诺塔规则从起始柱移动到辅助柱
	2.将第n个圆环从起始柱移动到目标柱
	3.将n-1个圆环按照汉诺塔规则从辅助柱移动到目标柱
 
对于实现步骤1，仍然是执行三个步骤：
	1.1.将上面的n-2个圆环按照汉诺塔规则从起始柱移动到辅助柱
	1.2.将第n-1个圆环移动到目标柱
	1.3.将n-2个圆环按照汉诺塔规则从辅助柱移动到目标柱
	但要注意的是此时的目标柱和辅助柱发生了改变，
	此时的目标柱相当于上一个过程中的辅助柱，此时的辅助柱相当于
	上一个过程中的目标柱

		同理，对于实现步骤1.1，仍然要执行相同的三个步骤，只不过
		这个过程中的目标柱和辅助柱同样发生了改变，此时的目标柱相
		当于上一个过程中的辅助柱，此时的辅助柱相当于上一个过程中的目标柱。
		……
		……
		直到最后只需移动一个圆盘，则直接将该圆盘从起始柱移动到目标柱。

对于实现步骤3，同理于步骤1的执行过程，仍然是执行三个步骤：
	3.1.将上面的n-2个圆环按照汉诺塔规则从起始柱移动到辅助柱
	3.2.将第n-2个圆环移动到目标柱
	3.3.将n-2个圆环按照汉诺塔规则从辅助柱移动到目标柱
	但要注意的是此时的起始柱和辅助柱发生了改变，
	此时的起始柱相当于上一个过程中的辅助柱，此时的辅助柱相当于上一个过程中的起始柱。
	……
	……
	直到最后只需移动一个圆盘，则直接将该圆盘从起始柱移动到目标柱。
*/
void hanio(int n, char origin, char auxiliary, char target) {
	if (n == 1) {
		printf("%c -> %c\n", origin, target);
	}
	else {
		hanio(n - 1, origin, target, auxiliary);
		printf("%c -> %c\n", origin,target);
		hanio(n - 1, auxiliary, origin, target);
	}
}
```